-- tables for users
drop table if exists users;
create table users (
  id bigint generated by default as identity primary key,
  user_id uuid,
  email varchar,
  name jsonb,
  fliks int,
  joined_date timestamp,
  location varchar,
  description text
);

drop table if exists groups;
create table groups (
  id bigint generated by default as identity primary key,
  name varchar,
  description text
);

drop table if exists group_users;
create table group_users (
  id bigint generated by default as identity primary key,
  group_id bigint,
  user_id bigint
);

-- tables for packet
drop table if exists packet;
create table packet (
  id bigint generated by default as identity primary key,
  type int, -- 0: url, 1 : clipboard
  app_target int, -- 0: browser, 1: app
  state int, -- y-scrolll pos | id
  selection int, -- paragraph
  data json -- packet data
);

drop table if exists flik;
create table flik (
  id bigint generated by default as identity primary key,
  sender uuid,
  receiver uuid,
  packet_id bigint
);

-- tables for rule
drop table if exists rule;
create table rule (
  id bigint generated by default as identity primary key,
  user_id uuid,
  rule_name text,
  rule_data json -- json data of rule
);
